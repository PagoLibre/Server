"use strict";!function(){function t(t){return PAGOL_TRANSLATIONS&&t in PAGOL_TRANSLATIONS?PAGOL_TRANSLATIONS[t]:t}function e(t,e=-1){return L.loading(t,e)}function n(t,e={},n=!1){return L.ajax(t,e,n)}function i(t,e=!0){return L.activate(t,e)}function a(t){return w(t.closest(".pagoL-main"))}function c(t){for(var e=t.split("?").pop().split("&"),n={},i=0;i<e.length;i++){var a=e[i].split("=");n[a[0]]=a[1]}return n}function o(t,e=-1,n=!1){return w.storage(t,e,n)}function r(){s.on("click",".pagoL-clipboard",function(){let e=w(this).find("span"),n=e.html();navigator.clipboard.writeText(window.atob(w(this).attr("data-text"))),e.html(t("Copied")),i(this),setTimeout(()=>{i(this,!1),e.html(n)},2e3)})}var s,l,d,u,h,p,f=!1,m="",b={},x={},g="undefined",v=typeof PAGOL_ADMIN!==g||document.getElementsByClassName("pagoL-admin").length,y=document.getElementsByTagName("script"),C=typeof PAGOL_LANGUAGE!==g&&PAGOL_LANGUAGE,T=window.innerWidth<769,_=!1,k=!1,w=function(t){return"object"==typeof t&&"e"in t?t:new w.init("string"==typeof t?document.querySelectorAll(t):t)};w.init=function(t){this.e="SELECT"==t.tagName||void 0===t[0]&&!NodeList.prototype.isPrototypeOf(t)?[t]:t},w.ajax=function(t,e=!1,n=!1,i="POST"){let a=new XMLHttpRequest,c="";if(a.open(i,t,!0),e)if("pagoL_wp_ajax"==e.action){for(var o in e)"object"==typeof e[o]&&(e[o]=JSON.stringify(e[o]));c=new URLSearchParams(e).toString(),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")}else(c=new FormData).append("data",JSON.stringify(e));a.onload=(()=>{n&&n(a.responseText)}),a.onerror=(()=>!1),a.send(c)},w.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},w.documentHeight=function(){let t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},w.init.prototype.on=function(t,e,n){for(var i=0;i<this.e.length;i++)this.e[i].addEventListener(t,function(t){for(var i=t.target;i&&i!==this;)i.matches(e)&&n.call(i,t),i=i.parentNode})},w.init.prototype.addClass=function(t){for(var e=0;e<this.e.length;e++)this.e[e].classList.add(t);return w(this.e)},w.init.prototype.removeClass=function(t){t=t.trim().split(" ");for(var e=0;e<t.length;e++)for(var n=0;n<this.e.length;n++)this.e[n].classList.remove(t[e]);return w(this.e)},w.init.prototype.toggleClass=function(t){for(var e=0;e<this.e.length;e++)this.e[e].classList.toggle(t);return w(this.e)},w.init.prototype.setClass=function(t,e=!0){for(var n=0;n<this.e.length;n++)e?w(this.e[n]).addClass(t):w(this.e[n]).removeClass(t);return w(this.e)},w.init.prototype.hasClass=function(t){return!(!this.e.length||!this.e[0].classList)&&this.e[0].classList.contains(t)},w.init.prototype.find=function(t){0===t.indexOf(">")&&(t=":scope"+t);try{return!(!this.e.length||!this.e[0].querySelectorAll)&&w(this.e[0].querySelectorAll(t))}catch(t){return console.warn(t),!1}},w.init.prototype.parent=function(){return!!this.e.length&&w(this.e[0].parentElement)},w.init.prototype.prev=function(){return!!this.e.length&&w(this.e[0].previousElementSibling)},w.init.prototype.next=function(){return!!this.e.length&&w(this.e[0].nextElementSibling)},w.init.prototype.attr=function(t,e=!1){if(this.e.length&&"function"==typeof this.e[0].getAttribute)return!1===e?this.e[0].getAttribute(t):(e?this.e[0].setAttribute(t,e):this.e[0].removeAttribute(t),w(this.e))},w.init.prototype.data=function(t=!1,e=!1){if(!this.e.length)return;let n={},i=this.e[0];if(t)return w(this).attr("data-"+t,e);for(var a=0,c=i.attributes,o=c.length;a<o;a++)n[c[a].nodeName.substr(5)]=c[a].nodeValue;return n},w.init.prototype.html=function(t=!1){if(this.e.length)return!1===t?this.e[0].innerHTML:("string"==typeof t||"number"==typeof t?this.e[0].innerHTML=t:this.e[0].appendChild(t),w(this.e))},w.init.prototype.append=function(t){if(this.e.length){var e=document.createElement("template");for(e.innerHTML=t.trim();e.content.childNodes.length;)this.e[0].appendChild(e.content.firstChild);return w(this.e)}},w.init.prototype.prepend=function(t){return this.e[0].innerHTML=t+this.e[0].innerHTML,w(this.e)},w.init.prototype.insert=function(t,e=!0){var n=document.createElement("template");return n.innerHTML=t.trim(),this.e[0].parentNode.insertBefore(n.content.firstChild,e?this.e[0]:this.e[0].nextElementSibling),w(this.e)},w.init.prototype.replace=function(t){return this.e[0].outerHTML=t,w(this.e)},w.init.prototype.remove=function(){for(var t=0;t<this.e.length;t++)this.e[t].remove()},w.init.prototype.is=function(t){return!(1!=this.e[0].nodeType||!this.e.length)&&(t=t.toLowerCase(),this.e[0].tagName.toLowerCase()==t||w(this).attr("type")==t)},w.init.prototype.index=function(){return[].indexOf.call(this.e[0].parentElement.children,this.e[0])},w.init.prototype.siblings=function(){return this.e[0].parentNode.querySelectorAll(":scope > *")},w.init.prototype.closest=function(t){return w(this.e[0].closest(t))},w.init.prototype.scrollTo=function(){this.e[0].scrollIntoView({behavior:"smooth",block:"center"})},w.init.prototype.val=function(t=null){if(null!==t)for(var e=0;e<this.e.length;e++)this.e[e].value=t;return this.e.length?this.e[0].value:""},w.load=function(t=!1,e=!0,n=!1,i=!1){let a=document.createElement(e?"script":"link");t?(e?a.src=t:a.href=t,a.type=e?"text/javascript":"text/css"):a.innerHTML=i,n&&(a.onload=function(){n()}),e||(a.rel="stylesheet"),document.head.appendChild(a)},w.storage=function(t,e=-1,n=!1){if(-1===e){let e=localStorage.getItem(t);return e?JSON.parse(e):n}localStorage.setItem(t,JSON.stringify(e))},w.download=function(t){var e=document.createElement("a"),n=["?","#","&"];e.href=t,t=t.substr(t.lastIndexOf("/")+1);for(var i=0;i<n.length;i++)t.includes(n[i])&&(t=t.substr(0,t.lastIndexOf(n[i])));e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)},w.init.prototype.i=function(t){return w(this.e[t])},window._query=w;var L={loading:function(t,e=-1){let n=(t=w(t)).hasClass("pagoL-loading");return"check"==e?n:-1!==e?t.setClass("pagoL-loading",!0===e):!!n||(this.loading(t,!0),!1)},activate:function(t,e=!0){return w(t).setClass("pagoL-active",e)},ajax:function(t,e=!1,n=!1){e.function=t,e.language=C,e.cloud=_,w.ajax(PAGOL_URL+"ajax.php",e,t=>{let e=!1,i=!1;try{e=!((i=JSON.parse(t))&&"success"in i&&i.success)}catch(t){e=!0}e?(s.find(".pagoL-loading:not([data-area])").removeClass("pagoL-loading"),console.error(t),x[h]=!1):n&&n(i.response)})},cookie:function(t,e=!1,n=!1,i="get",a=!1){let c="https:"==location.protocol?"SameSite=None;Secure;":"";if("get"==i){let e=document.cookie.split(";");for(var o=0;o<e.length;o++){for(var r=e[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t)){let e=r.substring(t.length+1,r.length);return e||!1}}return!1}if("set"==i){let i=new Date;i.setTime(i.getTime()+n*(a?1:86400)*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/;"+c}else this.cookie(t)&&(document.cookie=t+"="+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;"+c)},beautifyTime:function(e,n=!1,i=!1){let a;if("0000-00-00 00:00:00"==e)return"";if(e.indexOf("-")>0){let t=e.split(/[- :]/);a=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}else{let t=e.split(/[. :]/);a=new Date(t[2],t[1]-1,t[0],t[3],t[4],t[5])}let c=new Date,o=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())),r=(c-o)/864e5*(i?-1:1),s=o.toLocaleTimeString("en-EN",{hour:"2-digit",minute:"2-digit"});return"0"===s.charAt(0)&&(s.includes("PM")||s.includes("AM"))&&(s=s.substring(1)),r<1&&c.getDate()==o.getDate()?`<span>${t("Today")}</span>${n?` <span>${s}</span>`:""}`:`<span>${o.toLocaleDateString()}</span>${n?` <span>${s}</span>`:""}`},search:function(t,n){let i=w(t).parent().find("i"),a=w(t).val().toLowerCase().trim();e(i,"check")||(a!=m?(clearTimeout(f),f=setTimeout(()=>{m=a,n(a,i),this.loading(i)},500)):this.loading(i,!1))},searchClear:function(t,e){w(t).next().val()&&(w(t).next().val(""),e())},getURL:function(t=!1,e=!1){if(e||(e=location.href),!t){for(var n=e.split("?").pop().split("&"),i={},a=0;a<n.length;a++){var c=n[a].split("=");i[c[0]]=L.escape(c[1])}return i}return L.escape(decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[,""])[1].replace(/\+/g,"%20")||""))},escape:function(t){return t?t.replaceAll("<script","&lt;script").replaceAll("</script","&lt;/script").replaceAll("javascript:","").replaceAll("onclick=","").replaceAll("onerror=",""):t},checkout:{settings:function(t){let e=(t=w(t)).data("pagoL");e||(e=t.data("pagolibre"));let n={checkout_id:e};return e.includes("custom")?w.extend(n,w(t).data()):n},init:function(t,e,n=!1){let i=this.storageTransaction(t.checkout_id),a=o("pagoL-user-details",-1,{}),c=i.id&&(L.getURL("cc")||L.isFiat(i.external_reference)||L.isFiat(i.cryptocurrency)),r=L.getURL("payment_status"),l=L.getURL("redirect").replace("payment_status=paid",""),d=o("pagoL-quote");if(l&&(l+=r?(l.includes("?")?"&":"?")+"payment_status="+r:""),d&&l&&("cancelled"==r||L.getURL("cc")))return document.location=l;w.ajax(PAGOL_URL+"init.php",{checkout:t,language:C,cloud:_},t=>{if((e=w(e)).html(t),i){if(h=e.data("pagoL"),i||(i=checkout.data("pagolibre")),u=e.find("> .pagoL-main"),i.detected||c){if("cancelled"==r)return this.cancelTransaction(!0);this.monitorTransaction(i.encrypted)}else{let t=parseInt((Date.now()-i.storage_time)/1e3),e=PAGOL_SETTINGS.countdown-Math.floor(t/60),n=60-t%60;n&&e--,this.initTransaction(i.id,i.amount,i.to,i.cryptocurrency,i.external_reference,[e,n],i.custom_token,i.redirect,i.vat,i.encrypted,i.amount_extra,i.confirmations)}u.hasClass("pagoL-popup")&&this.openPopup(h)}for(var p in a)e.find(`.pagoL-user-details [name="${p}"]`).val(a[p]);if(o("pagoL-billing")&&L.checkout.showInvoiceBox(e.find("#pagoL-btn-invoice").e[0]),c)u.removeClass("pagoL-tx-cnt-active").addClass("pagoL-complete-cnt-active"),u.find(".pagoL-complete-cnt .pagoL-text").addClass("pagoL-order-processing"),this.showCancelButton(".pagoL-complete-cnt");else if(L.getURL("pay")&&!i)if(r){if(l)return document.location=l}else e.find(".pagoL-payment-methods > div").addClass("pagoL-hidden"),e.find(`.pagoL-payment-methods [data-cryptocurrency="${L.getURL("pay").toLowerCase()}"]`).removeClass("pagoL-hidden").e[0].click(),d&&(L.getURL("checkout_id").includes(d.id)||location.href.includes(d.id))||s.removeClass("pagoL-loading");L.metamask.active()&&s.find("#metamask").removeClass("pagoL-hidden"),n&&n(t)})},initTransaction:function(i,a,c,o,r,l=!1,p=!1,f=!1,m=!1,g=!1,v=!1,y=3){let C=u.find(".pagoL-pay-cnt"),T=C.find(".pagoL-pay-address"),_=L.baseCode(o.toUpperCase()),k=C.find("[data-countdown]"),w={id:i,amount:a,to:c,cryptocurrency:o,external_reference:r,custom_token:p,redirect:f,vat:m,encrypted:g,amount_extra:v,min_confirmations:y},S=L.network(o,!1,!0),N="btc_ln"==o;u.addClass("pagoL-pay-cnt-active").data("active",o).data("custom-token",p?p.type:""),T.find(".pagoL-text").html(N?t("Lightning Invoice"):_+S+" "+t("address")),T.find(".pagoL-title").html(c),T.find(".pagoL-clipboard").data("text",window.btoa(c)),(T=C.find(".pagoL-pay-amount")).find(".pagoL-title").html(`${a} ${_}<div>${v&&!v.toUpperCase().includes(_)?v.toUpperCase():""}</div>`),T.find(".pagoL-clipboard").data("text",window.btoa(a)),u.data("transaction-id",i),T=C.find(".pagoL-qrcode-text"),C.find(".pagoL-qrcode-link").attr("href",PAGOL_SETTINGS.names[o][0]+":"+c+"&amount="+a),C.find(".pagoL-qrcode").attr("src",PAGOL_URL+"vendor/qr.php?s=qr&d="+PAGOL_SETTINGS.names[o][0]+"%3A"+c+"%3Famount%3D"+a+"&md=1&wq=0&fc="+PAGOL_SETTINGS.qr_code_color),T.find("img").attr("src",p?p.img:`${PAGOL_URL}media/icon-${o}.svg`),T.find("div").html(t(N?"Bitcoin Lightning Network":"Only send {T} to this address").replace("{T}",_+S)),k.html(""),d=l?[l[0],l[1],!0]:[PAGOL_SETTINGS.countdown,0,!0],clearInterval(b[h]),b[h]=setInterval(()=>{k.html(`${d[0]}:${d[1]<10?"0":""}${d[1]}`),d[1]--,d[1]<=0&&(d[0]<=0&&setTimeout(()=>{this.initTransaction_cancel(w,i)},500),d[0]<5&&d[2]&&(k.parent().addClass("pagoL-countdown-expiring"),d[2]=!1),d[0]--,d[1]=59)},1e3),clearInterval(b["check-"+h]),b["check-"+h]=setInterval(()=>{x[h]||(x[h]=!0,n("check-transactions",{transaction_id:i},t=>{if(x[h]=!1,t){if("expired"==t)return this.initTransaction_cancel(w,i,"Transaction expired"),console.error(t);if(Array.isArray(t)&&"error"==t[0])return console.error(t[1]);N?t.confirmed&&this.completeTransaction(t,this.storageTransaction(h)):this.monitorTransaction(t)}}))},N?1e3:5e3),this.storageTransaction(h,w),L.event("TransactionStarted",w),e(C,!1),e(s,!1)},initTransaction_cancel:function(e,n,i=!1,a=!1){L.event("TransactionCancelled",e),u.find("#pagoL-expired-tx-id").html(n),i&&u.find(".pagoL-failed-cnt .pagoL-title").html(t(i)),a&&u.find(".pagoL-failed-cnt .pagoL-title + .pagoL-text").html(t(a)),u.removeClass("pagoL-tx-cnt-active pagoL-pay-cnt-active").addClass("pagoL-failed-cnt-active"),this.cancelTransaction(!0)},monitorTransaction:function(e){let i=this.storageTransaction(h),a="check-"+h;clearInterval(b[h]),clearInterval(b[a]),b[a]=setInterval(()=>{u&&!x[h]&&(x[h]=!0,n("check-transaction",{transaction:e},e=>{x[h]=!1,u.find(".pagoL-tx-confirmations").html(e.confirmations+" / "+i.min_confirmations),e.confirmations&&u.find(".pagoL-tx-status").addClass("pagoL-tx-status-confirmed").html(t("Confirmed")),e.confirmed&&(e.underpayment?(u.removeClass("pagoL-tx-cnt-active").addClass("pagoL-underpayment-cnt-active"),clearInterval(b[a]),u.find("#pagoL-underpaid-tx-id").html(i.id),this.cancelTransaction()):this.completeTransaction(i,e,a))}))},3e3),i&&(i.detected=!0,i.encrypted=e),h&&this.storageTransaction(h,i),u&&(u.addClass("pagoL-tx-cnt-active"),u.find(".pagoL-tx-status").removeClass("pagoL-tx-status-confirmed").html(t("Pending")),u.find(".pagoL-tx-confirmations").html("0 / "+i.min_confirmations),this.showCancelButton(".pagoL-tx-cnt",L.isFiat(i.external_reference)||L.isFiat(i.cryptocurrency)?3e4:5e3))},completeTransaction:function(e,i,a=!1){let c=u.find(".pagoL-complete-cnt");i.invoice&&c.append(`<a href="${i.invoice}" target="_blank" class="pagoL-link pagoL-underline">${t("View Invoice")}</div>`),(i.redirect||PAGOL_SETTINGS.redirect)&&setTimeout(()=>{document.location.href=i.redirect?i.redirect:PAGOL_SETTINGS.redirect},300),i.downloads_url&&n("shop-downloads",{encrypted_transaction_id:L.getURL("downloads",i.downloads_url)},t=>{for(var e=0;e<t[0].length;e++)w.download(t[0][e]);setTimeout(()=>{n("shop-delete-downloads",{file_names:t[1]})},1e3)}),i.license_key&&c.append(`<div class="pagoL-input pagoL-input-license-key"><span>${t("License Key")}</span><input value="${i.license_key}" type="text" readonly></div>`),e.redirect?setTimeout(()=>{document.location.href=encodeURI(`${e.redirect}${e.redirect.includes("?")?"&":"?"}transaction_id=${e.id}&amount=${e.amount}&address=${e.address}&cryptocurrency=${e.cryptocurrency}&external_reference=${e.external_reference}`)},300):u.removeClass("pagoL-tx-cnt-active").addClass("pagoL-complete-cnt-active"),clearTimeout(f),clearInterval(b[a]),c.find(".pagoL-text").removeClass("pagoL-order-processing"),c.find(".pagoL-cancel-transaction").remove(),L.event("TransactionCompleted",e),this.cancelTransaction()},cancelTransaction:function(t=!1){if(t&&!L.getURL("demo")){let t=this.storageTransaction(h);t&&t.encrypted&&!t.prevent_cancel&&n("cancel-transaction",{transaction:t.encrypted})}clearInterval(b[h]),clearInterval(b["check-"+h]),u.removeClass("pagoL-pay-cnt-active"),x[h]=!1,this.storageTransaction(h,"delete"),h=!1,u=!1},storageTransaction:function(t,e=!1){let n=o("pagoL-active-transaction",-1,{}),i=t in n;if(e)"delete"==e?delete n[t]:(i?(e=Object.assign(n[t],e)).storage_time=n[t].storage_time:e.storage_time=Date.now(),e.storage_time=i?n[t].storage_time:Date.now(),n[t]=e);else if(i){if(n[t].detected||n[t].storage_time+6e4*PAGOL_SETTINGS.countdown>Date.now())return n[t];delete n[t]}return o("pagoL-active-transaction",n),!1},show:function(t){s.find(`[data-pagoL="${t}"] > div, [data-pagolibre="${t}"] > div`).removeClass("pagoL-hidden")},openPopup(t,e=!0){i(s.find(`[data-pagoL="${t}"],[data-pagolibre="${t}"]`).find(".pagoL-popup,.pagoL-popup-overlay"),e)},getBillingDetails:function(t){if(t.find('#pagoL-billing [name="name"]').val().trim()){let e={};return t.find("#pagoL-billing input, #pagoL-billing select").e.forEach(t=>{e[w(t).attr("name")]=w(t).val()}),o("pagoL-billing",e),e}return""},vat:function(t){let i=t.find(".pagoL-vat"),a=t.find('#pagoL-billing [name="country"]').e[0];i.e.length&&(e(i),n("vat",{amount:t.data("discount-price")?t.data("discount-price"):t.data("start-price"),country_code:w(a.options[a.selectedIndex]).data("country-code"),currency:t.data("currency"),vat_number:t.find('[name="vat"]').val()},n=>{i.html(n[4]),i.attr("data-country",n[3]).attr("data-country-code",n[2]).attr("data-amount",n[1]).attr("data-percentage",n[5]),t.attr("data-price",n[0]),t.find(".pagoL-amount-fiat-total").html(n[0]),e(i,!1)}))},showInvoiceBox:function(t){let e=o("pagoL-billing"),n=a(t),i=n.find('#pagoL-billing [name="country"]');if(e)for(var c in e)n.find(`#pagoL-billing [name="${c}"]`).val(e[c]);else i.val(n.find(".pagoL-vat").attr("data-country"));w(t).addClass("pagoL-hidden"),this.vat(n),w("#pagoL-billing").removeClass("pagoL-hidden")},showCancelButton:function(e,n=5e3){clearTimeout(f),f=setTimeout(function(){u.find(e).append(`<div class="pagoL-cancel-transaction pagoL-underline">${t("Cancel")}</div>`)},n)}},event:function(t,e={}){e.checkout_id=h,document.dispatchEvent(new CustomEvent("PAGOL"+t,{detail:e}))},baseCode:function(t){return t.replace("_tron","").replace("_TRON","").replace("_bsc","").replace("_BSC","").replace("_ln","").replace("_LN","").replace("_sol","").replace("_SOL","")},network:function(e,n=!0,i=!1){let a=v?PAGOL_ADMIN_SETTINGS.cryptocurrencies:PAGOL_SETTINGS.cryptocurrencies,c="code"===n;if(e=e.toLowerCase(),i&&["btc","eth","ltc","xrp","algo","bch","doge","bnb","sol"].includes(e))return"";for(var o in a)if(a[o].includes(e)){if(c)return o.toLowerCase();let e=o.replace("TRX","TRON").replace("SOL","SOLANA")+" "+t("network");return n?`<span class="pagoL-label">${e}</span>`:" "+t("on")+" "+e}return c?e:""},isFiat:function(t){return["stripe","verifone","paypal"].includes(t)||3==t.length&&!L.network(t)},lightbox:function(t,e,n=[],a=""){let c=s.find("#pagoL-lightbox"),o="";for(var r=0;r<n.length;r++)o+=`<div id="${n[r][0]}" class="pagoL-btn">${n[r][1]}</div>`;c.find(".pagoL-title").html(t),c.find(".pagoL-lightbox-buttons").html(o),c.find("#pagoL-lightbox-main").html(e).e[0].style.maxHeight=window.innerHeight-(T?130:183)+"px",c.data("lightbox-id",a),i(s.find("#pagoL-lightbox-loading"),!1),i(c)},lightboxClose:function(){i(s.find("#pagoL-lightbox"),!1)},metamask:{accounts:!1,transactionRequest:async function(t,e,n=!1,i=!1){let a={from:this.accounts[0],to:n?L.web3.tokens[n][0]:e,value:n?"":t,data:n?L.web3.getData(e,t):""},c=L.checkout.storageTransaction(h);c&&!["BAT","ETH"].includes(c.cryptocurrency.toUpperCase())&&(a.gas="10000"),await ethereum.request({method:"eth_sendTransaction",params:[a]}).then(t=>{i&&i(t)})},transaction:async function(t,n,i=!1,a=!1){let c=[1,"1"];if(i)if(i=i.toUpperCase(),["ETH","BNB"].includes(i))"BNB"==i&&(c=[56,"38"]),i=!1;else{if(typeof Web3===g)return w.load(PAGOL_URL+"vendor/web3.js",!0,()=>{this.transaction(t,n,i,a)});if(!L.web3.tokens)return L.web3.getTokens(()=>{this.transaction(t,n,i,a)})}if("0x"!==!t.substr(0,2)&&(t=L.web3.toHex(t,i?L.web3.tokens[i][1]:18)),ethereum.networkVersion!=c[0])try{await ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x"+c[1]}]}).then(()=>{this.transactionCheckAccount(t,n,i,a)})}catch(t){4902===t.code?await ethereum.request({method:"wallet_addEthereumChain",params:[{chainName:"Polygon Mainnet",chainId:web3.toHex(chainId),nativeCurrency:{name:"MATIC",decimals:18,symbol:"MATIC"},rpcUrls:["https://polygon-rpc.com/"]}]}):console.error(t)}else this.transactionCheckAccount(t,n,i,a);p&&(e(p,!1),p=!1)},transactionCheckAccount:async function(t,e,n=!1,i=!1){this.accounts?this.transactionRequest(t,e,n,i):await ethereum.request({method:"eth_requestAccounts"}).then(a=>{this.accounts=a,this.transactionRequest(t,e,n,i)})},active:function(){return window.ethereum&&window.ethereum.isMetaMask}},web3:{tokens:!1,getData:function(t,e){return(new Web3).eth.abi.encodeFunctionCall({constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},[t,e])},toHex:function(t,e){return"0x"+(parseFloat(t)*10**e).toString(16)},getTokens:function(t=!1){n("get-tokens",{},e=>{L.web3.tokens=e,t&&t()})}}};window.PAGOLibre=L,document.addEventListener("DOMContentLoaded",()=>{if(s=w(document.body),v)r();else{if(typeof PAGOL_URL!=g)return;L.getURL("pay")&&s.addClass("pagoL-loading"),_=L.getURL("cloud"),k=s.find("#pagolibre-exchange-init");for(var d=0;d<y.length;d++)if(["pagolibre","pagolibre-js","pagoL-cloud"].includes(y[d].id)){let f=y[d].src.replace("js/client.js","").replace("js/client.min.js",""),m=c(f);f.includes("?")&&(f=f.substr(0,f.indexOf("?"))),w.load(f+"css/client.css?v=1.0.0",!1),"lang"in m&&(C=m.lang),"cloud"in m?_=m.cloud:typeof PAGOL_CLOUD_TOKEN!==g&&(_=PAGOL_CLOUD_TOKEN),f.includes("?")&&(f=f.substr(0,f.indexOf("?"))),l=v?[]:s.find("[data-pagoL],[data-pagolibre]");let b={language:C,cloud:_};b.init=!0,w.ajax(f+"init.php",b,t=>{if("no-credit-balance"===t)return console.warn("PagoLibre: No credit balance.");w.load(!1,!0,!1,t),k.e.length?w.ajax(f+"init.php",{language:C,cloud:_,init_exchange:!0},t=>{w.load(f+"apps/exchange/exchange.css?v=1.0.0",!1,()=>{k.html(t),w.load(f+"apps/exchange/exchange.js?v=1.0.0")})}):l.e.forEach(t=>{L.checkout.init(L.checkout.settings(t),t)})}),r(),L.event("Init"),s.on("click",".pagoL-payment-methods > div",function(){let i=a(this),c=i.parent().attr("data-pagoL");c||(c=i.parent().attr("data-pagolibre"));let r={},l={},d=i.find(".pagoL-user-details"),p=i.find(".pagoL-custom-fields"),f=!1,m=i.find("#pagoL-error-message"),b=w(this).attr("data-cryptocurrency"),x=i.attr("data-external-reference"),g=i.attr("data-price"),v=i.find("#user-amount"),y=w(this).attr("data-custom-coin"),C=i.find(".pagoL-vat"),T=(i.find("#pagoL-discount-field input").val().trim(),document.location.href),_="";if(i.find(".pagoL-input").removeClass("pagoL-error"),h&&c!=h&&(f="Another transaction is being processed. Complete the transaction or cancel it to start a new one."),d.e.length&&(d.find("input").e.forEach(t=>{let e=t.value.trim();e?r[t.getAttribute("name")]=e:L.getURL("currency")||(t.parentElement.classList.add("pagoL-error"),f="Please provide your personal information")}),o("pagoL-user-details",r)),p.e.length&&(p.find("input, select, textarea").e.forEach(t=>{let e="checkbox"==t.type?t.checked:t.value.trim();if(e){let n=t.getAttribute("name");l[n]=e,_+=n+": "+e+"\n"}else t.hasAttribute("required")&&(t.parentElement.classList.add("pagoL-error"),f="Please provide the required information")}),o("pagoL-custom-fields",l)),g&&-1!=g&&"0"!=g||(g=v.find("input"))&&((g=g.val())||(v.addClass("pagoL-error"),f="Please specify the desired amount")),m.html(f?t(f):""),f)return s.removeClass("pagoL-loading"),void m.scrollTo();h=c,_+=(u=i).attr("data-note"),y&&(y={type:y,img:w(this).find("img").attr("src")});let k=L.checkout.getBillingDetails(u);C=!(!C.e.length||!C.attr("data-amount"))&&{amount:C.attr("data-amount"),percentage:C.attr("data-percentage"),country:C.attr("data-country"),country_code:C.attr("data-country-code")},L.getURL("cc")&&("?"==(T=T.replace("cc="+L.getURL("cc"),"")).slice(-1)&&(T=T.slice(0,-1)),window.history.replaceState({},document.title,T)),u.addClass("pagoL-pay-cnt-active"),e(u.find(".pagoL-pay-cnt")),n("create-transaction",{amount:g,cryptocurrency_code:b,currency_code:u.attr("data-currency"),external_reference:u.attr("data-external-reference"),title:u.attr("data-title"),note:_.trim(),custom_token:y,url:T,billing:k?JSON.stringify(k):"",vat:C,checkout_id:h,user_details:r,discount_code:i.data("discount-code"),type:PAGOL_SETTINGS.exchange&&3==L.getURL("type")?3:PAGOL_SETTINGS.shop&&!h.includes("custom-")?2:1},e=>{if("error"==e[0])return m.html(t("Something went wrong. Please try again or select another cryptocurrency.")),L.checkout.cancelTransaction(!0);if(!i.data("price"))return L.checkout.completeTransaction({},e);if(L.isFiat(b)){let t={id:e[0],amount:g,external_reference:b,redirect:u.attr("data-redirect"),encrypted:e[3]};L.checkout.storageTransaction(h,t),L.event("TransactionStarted",t),document.location=e[2]}else L.checkout.initTransaction(e[0],e[1],e[2],b,x,!1,y,u.attr("data-redirect"),C,e[4],g+" "+u.attr("data-currency"),e[3])})}),s.on("click",".pagoL-back",function(){u.find(".pagoL-pay-top-main").addClass("pagoL-hidden")}),s.on("click","#pagoL-abort-cancel, #pagoL-confirm-cancel",function(){u.find(".pagoL-pay-top-main").removeClass("pagoL-hidden")}),s.on("click","#pagoL-confirm-cancel",function(){let t=L.checkout.storageTransaction(h);if(L.event("TransactionCancelled",t),L.checkout.cancelTransaction(!0),o("pagoL-quote")&&t.checkout_id.includes(o("pagoL-quote").id)){let e=t.redirect;s.addClass("pagoL-loading"),document.location=e.includes("payment_status")?e:e+(e.includes("?")?"&":"?")+"payment_status=cancelled"}}),s.on("click",".pagoL-failed-cnt .pagoL-btn",function(){s.find(".pagoL-failed-cnt-active").removeClass("pagoL-failed-cnt-active")}),s.on("click","#metamask",function(){if(e(this))return;p=this;let t=L.checkout.storageTransaction(h);L.metamask.transaction(t.amount,t.to,t.cryptocurrency)}),s.on("click",".pagoL-cancel-transaction",function(){o("pagoL-active-transaction",{}),location.reload()}),s.on("click",".pagoL-btn-popup,.pagoL-popup-close",function(){i(w(this.closest("[data-pagoL],[data-pagolibre]")).find(".pagoL-popup,.pagoL-popup-overlay"),w(this).hasClass("pagoL-btn-popup"))}),s.on("click",".pagoL-collapse-btn",function(){w(this).parent().removeClass("pagoL-collapse"),w(this).remove()}),s.on("click","#pagoL-btn-invoice",function(){L.checkout.showInvoiceBox(this)}),s.on("click","#pagoL-btn-invoice-close",function(){let t=a(this);w(this).parent().addClass("pagoL-hidden"),t.find("#pagoL-btn-invoice").removeClass("pagoL-hidden"),t.find("#pagoL-billing").find("input, select").val(""),o("pagoL-billing",!1),L.checkout.vat(t)}),s.on("change",'#pagoL-billing [name="country"]',function(){L.checkout.vat(a(this))}),s.on("focusout",'#pagoL-billing [name="vat"]',function(){L.checkout.vat(a(this))}),s.on("click","#pagoL-discount-field .pagoL-btn",function(){let i=w(this).parent().find("input").val().trim(),c=a(this),o=parseFloat(c.data("start-price"));i&&!e(this)&&(c.data("discount-code",""),n("apply-discount",{discount_code:i,checkout_id:c.data("checkout-id"),amount:o},n=>{e(this,!1);let a=!1!==n&&n!==o&&!isNaN(n)&&parseFloat(n)<o;c.find(".pagoL-amount-fiat-total").html(a?n:c.data("start-price")),c.data("price",a?n:c.data("start-price")).data("discount-code",a?i:""),c.data("discount-price",a?0===n?"0":n:""),c.find("#pagoL-error-message").html(a?"":t("Invalid discount code")),a&&L.checkout.vat(c)}))});break}}s.on("click","#pagoL-lightbox-close",function(){L.lightboxClose()}),s.on("click",".pagoL-select",function(){let t=w(this).find("ul"),e=t.hasClass("pagoL-active");i(t,!e),v&&!e&&setTimeout(()=>{PAGOLAdmin.active_element=t.e[0]},300)}),s.on("click",".pagoL-select li",function(){let t=w(this.closest(".pagoL-select")),e=w(this).attr("data-value");var n=t.find(`[data-value="${e}"]`);i(t.find("li"),!1),t.find("p").attr("data-value",e).html(n.html()),i(n,!0),v&&(PAGOLAdmin.active_element=!1)})},!1)}();